<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>HeadPilot - Face Tracker</title>
  <link rel="stylesheet" href="tracker.css">
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <div class="header-content">
        <h1><img src="headpilot_logo.png" alt="HeadPilot" class="header-icon">HeadPilot</h1>
        <p class="header-subtitle">Hands-free browser control</p>
      </div>
      <button id="settingsBtn" class="icon-button" style="display: none;" title="Settings">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"/>
        </svg>
      </button>
    </header>

    <main class="app-main">
      <div class="video-section">
        <div id="container">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas"></canvas>
        </div>
      </div>

      <div class="controls-section">
        <div id="controls">
          <button id="startBtn" class="primary-button" disabled>
            <div class="loading">
              <div class="spinner"></div>
              <span>Loading MediaPipe...</span>
            </div>
          </button>
          <button id="stopBtn" class="secondary-button" style="display: none;">Stop Camera</button>
          <button id="controlBtn" class="accent-button" style="display: none;">Enable Browser Control</button>
        </div>
      </div>

      <div class="status-section">
        <div id="status">
          <div class="info">Initializing MediaPipe Face Landmarker model...</div>
          <div class="info">This may take a few seconds on first load.</div>
        </div>
      </div>
    </main>

    <!-- Settings Panel -->
    <aside id="settingsPanel" class="settings-panel" style="display: none;">
      <div class="settings-header">
        <h2>Settings</h2>
        <button id="closeSettings" class="close-button" title="Close settings">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>

      <div class="settings-content">
        <p class="settings-description">Adjust sensitivity to match your comfort level</p>

        <div class="setting-group">
          <div class="setting-header">
            <label class="setting-label" for="scrollSensitivity">Scroll Sensitivity</label>
            <span class="setting-value" id="scrollSensitivityValue">100%</span>
          </div>
          <input type="range" id="scrollSensitivity" min="10" max="200" value="100" step="10">
          <p class="setting-hint">How much head movement is needed to scroll</p>
        </div>

        <div class="setting-group">
          <div class="setting-header">
            <label class="setting-label" for="clickSensitivity">Click Sensitivity</label>
            <span class="setting-value" id="clickSensitivityValue">100%</span>
          </div>
          <input type="range" id="clickSensitivity" min="50" max="200" value="100" step="10">
          <p class="setting-hint">How wide to open your mouth to click</p>
        </div>

        <div class="setting-group">
          <div class="setting-header">
            <label class="setting-label" for="gestureSensitivity">Gesture Sensitivity</label>
            <span class="setting-value" id="gestureSensitivityValue">100%</span>
          </div>
          <input type="range" id="gestureSensitivity" min="50" max="200" value="100" step="10">
          <p class="setting-hint">Movement needed for gestures (smile, wink, tilt)</p>
        </div>

        <div class="setting-group">
          <div class="setting-header">
            <label class="setting-label" for="cursorSpeed">Cursor Speed</label>
            <span class="setting-value" id="cursorSpeedValue">100%</span>
          </div>
          <input type="range" id="cursorSpeed" min="25" max="200" value="100" step="25">
          <p class="setting-hint">How fast the cursor moves with your gaze</p>
        </div>
      </div>

      <div class="settings-footer">
        <button id="resetNeutralPosition" class="text-button">Reset Neutral Position</button>
        <button id="resetSettings" class="text-button">Reset All to Defaults</button>
      </div>
    </aside>
  </div>

  <script src="icons.js"></script>
  <script type="module" src="tracker.js"></script>
</body>
</html>